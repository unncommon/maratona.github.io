function setupPhoto(e,t,n){var o=photoInfo.length;photoInfo[o]=new Object,photoInfo[o].uniq=n,photoInfo[o].index=t,photoInfo[o].photos=new Array;for(var l=e.split("http"),i=1;i<l.length;i++){var a="http"+l[i];i==l.length-1&&(a=a.substring(0,a.length-1)),", "==a.substring(a.length-2)&&(a=a.substring(0,a.length-2)),","==a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),photoInfo[o].photos[i-1]=a}}function clearPhotoInfo(e){for(var t=-1,n=0;n<photoInfo.length;n++)if(photoInfo[n].uniq==e.value){t=n;break}t!=-1&&(photoInfo[t]=new Object,photoInfo[t].uniq=-1,photoInfo[t].index=-1,photoInfo[t].photos=new Array)}function changePhoto(e,t,n,o){for(var l=-1,i=0;i<photoInfo.length;i++)if(photoInfo[i].uniq==t){l=i;break}l==-1&&(setupPhoto(o,n,t),l=photoInfo.length-1);var a=photoInfo[l].index+e;a>=photoInfo[l].photos.length?a=0:a<0&&(a=photoInfo[l].photos.length-1),photoInfo[l].index=a;var r=photoInfo[l].photos[a];if(null!=r){var d=r.split("!");if(null!=d){var u=d[0],s=document.getElementById("photoImage"+photoInfo[l].uniq);if(null!=s&&s.setAttribute("src",u),d.length>1){var c=d[1],g=document.getElementById("photoAttribution"+photoInfo[l].uniq);if(null!=g){for(var h=document.createTextNode(c);null!=g.firstChild;)g.removeChild(g.firstChild);g.appendChild(h)}}}}}function doPopup(e,t){null!=t&&""!=t||(t="widgetPopupWin"),popwindow=window.open(e,t,"width=600,height=600,scrollbars=yes"),window.focus&&popwindow.focus()}function doPopupWithSize(e,t,n,o){null!=t&&""!=t||(t="widgetPopupWin"),popwindow=window.open(e,t,"width="+n+",height="+o+",scrollbars=1"),window.focus&&popwindow.focus()}function doNewTAWindow(e,t){return null!=t&&""!=t||(t="widgetNewTaWin"),window.open(e,t,"toolbar=1,resizable=1,menubar=1,location=1,status=1,scrollbars=1,width=800,height=600")}function doSort(e){var t=getElementsByName_iefix("dd","sortableReview");if(!(null==t||t.length<=1)){for(var n=new Array,o=0;o<t.length;o++){var l=t[o].id.split("-");null==e||0==e.indexOf("date")?n.push(l[1]+"-"+l[0]+"-"+l[2]):n.push(l[2]+"-"+l[0]+"-"+l[1])}n.sort(),e.indexOf("desc")>-1&&n.reverse();for(var i=document.createElement("div"),o=0;o<n.length;o++){var a=n[o].split("-"),r="";r=null==e||0==e.indexOf("date")?a[1]+"-"+a[0]+"-"+a[2]:a[1]+"-"+a[2]+"-"+a[0];var d=document.getElementById(r);i.appendChild(d)}for(var u=document.getElementById("reviewsContainer");null!=u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i)}}function doSortWithPages(e,t){var n=getElementsByName_iefix("dl","sortableReviewPair");if(!(null==n||n.length<=1)){for(var o=new Array,l=0;l<n.length;l++){var i=n[l].id.split("-");null==e||0==e.indexOf("date")?o.push(i[1]+"-"+i[0]+"-"+i[2]):0==e.indexOf("rating")?o.push(i[2]+"-"+i[0]+"-"+i[1]):0==e.indexOf("default")&&(i[0].substr(2,3)<10&&(i[0]="rr0"+i[0].charAt(2)),o.push(i[0]+"-"+i[1]+"-"+i[2]))}o.sort(),e.indexOf("desc")>-1&&o.reverse();var a=getElementsByName_iefix("div","review_page");if(!(null==a||a.length<=1)){for(var r=document.createElement("div"),l=0;l<a.length;l++)for(var d=0;d<a[l].length;d++){var u=a[l][d];"sortableReviewPair"==u.nodename&&(a[l].removeChild(u),r.appendChild(u))}for(var s=0,c=1,l=0;l<o.length;l++){var g=document.getElementById("PAGING_INFO_"+c),h=o[l].split("-"),f="";"r"==h[0].charAt(0)&&"0"==h[0].charAt(2)&&(h[0]="rr"+h[0].charAt(3)),f=null==e||0==e.indexOf("date")?h[1]+"-"+h[0]+"-"+h[2]:0==e.indexOf("rating")?h[1]+"-"+h[2]+"-"+h[0]:h[0]+"-"+h[1]+"-"+h[2];var m=document.getElementById(f);a[c-1].insertBefore(m,g),s++,s==t&&(s=0,c++)}for(var l=1;l<a.length;l++)a[l].hide();a[0].show()}}}function getElementsByName_iefix(e,t){var n=document.getElementsByTagName(e),o=new Array;for(i=0,iarr=0;i<n.length;i++)att=n[i].getAttribute("name"),att==t&&(o[iarr]=n[i],iarr++);return o}function expandReview(e,t,n){var o="none",l="block";0==n&&(o="block",l="none");for(var i=getElementsByName_iefix("dd","reviewText"),a=0;a<i.length;a++){var r=i[a];r.id==t+"short"+e?r.style.display=o:r.id==t+"full"+e?r.style.display=l:r.id.indexOf("short")!=-1?r.style.display="block":r.style.display="none"}window.sendHeight&&sendHeight()}function toggleLanguage(e,t){for(var n=getElementsByName_iefix("dd","sortableReview"),o=0;o<n.length;o++){var l=n[o];if(l.id.substr(0,1)==t){l.style.display="block";for(var i=l.getElementsByTagName("dd"),a=0;a<i.length;a++){var r=i[a],d=r.id;"full"!=d.substr(1,4)&&"short"!=d.substr(1,5)||(d.substr(d.length-e.length,e.length)==e?d.substr(0,5)==t+"full"?r.style.display="block":r.style.display="none":d.substr(0,6)==t+"short"?r.style.display="block":r.style.display="none")}}else l.style.display="none"}}function showElem(e){var t=document.getElementById(e);null!=t&&(t.style.display="block")}function hideElem(e){var t=document.getElementById(e);null!=t&&(t.style.display="none")}function setHref(e,t){var n=document.getElementById(e);null!=n&&n.setAttribute("href",t)}function changePane(e,t){changeTab(e);for(var n=$$("#list"+e+" div[name=propertyPane]"),o=0;o<n.length;++o)n[o].id=="list"+t+"Pane"?n[o].style.display="block":n[o].style.display="none"}function changeTab(e){var t=getElementsByName_iefix("a","propertyTab");if(!(null==t||t.length<=1)){for(var n=0;n<t.length;n++)t[n].id==e?t[n].className="tabSelected":t[n].className="";var o=getElementsByName_iefix("div","propertyList");if(!(null==o||o.length<=1)){for(var n=0;n<o.length;n++)o[n].id=="list"+e?o[n].style.display="block":o[n].style.display="none";var l=document.getElementById("DESTSEARCH_FORM");null!=l&&null!=l.tab&&(l.tab.value=e)}}}function getPartnerPropertyLink(e,t,n,o,l,i){var a=null;return window.taPartnerPropertyLink&&"true"==l&&(a=taPartnerPropertyLink(t,n,o)),null==a?"new"==i&&"false"==l?void doNewTAWindow(e,"newTApropdetail"):void doPopup(e,"propdetail"):void partnerRedirect(a,i)}function getPartnerPropertyLinkForMap(e,t,n,o){var l=null;return window.taPartnerPropertyLink&&(l=taPartnerPropertyLink(t,n,o)),null!=l&&""!=l?l:e}function getPartnerBookingLink(e,t,n,o){var l=null;if(window.taPartnerBookingLink&&(l=taPartnerBookingLink(e,t,n),null!=l&&""!=l)){if(window.taPartnerBookingText){var i=taPartnerBookingText(e,t,n);if(null!=i&&""!=i){var a=document.getElementById(o);a.innerHTML=i}}return l}return null}function partnerRedirect(e,t){return null==t||""==t||"existing"==t?void(null==window.opener?window.top.location=e:window.opener.top.location=e):"new"==t?void doNewTAWindow(e,"tpbWin"):void 0}function doCRPopup(e,t){popwindow=window.open(e,t,"toolbar=0,resizable=1,menubar=0,location=0,status=0,scrollbars=1,width=255,height=730,screenX=5,left=5,screenY=5,top=5"),window.focus&&popwindow.focus()}function doMore(e){var t=document.getElementById(e+"full"),n=document.getElementById(e+"short");t.style.display="block",n.style.display="none"}function doLess(e){var t=document.getElementById(e+"full"),n=document.getElementById(e+"short");t.style.display="none",n.style.display="block"}function callForumWidget(e,t,n){var o=e+"/WidgetEmbed-cdsforum?locationId="+t+n;document.location=o}function pageNav(e,t,n){for(var o=0;o<n;o++){var l=document.getElementById(e+o),i=document.getElementById(e+"Link"+o);null!=l&&void 0!=l&&(o==t?(l.style.display="block",null!=i&&void 0!=i&&(i.style.cursor="default",i.style.color="#2c2c2c")):(l.style.display="none",null!=i&&void 0!=i&&(i.style.cursor="pointer",i.style.color="#202d95")))}}function doHacSearch(e,t){var n=t,o=document.getElementById(e);if(null!=o&&void 0!=o&&null!=t&&void 0!=t){var l=t.substring(t.length-1);"/"!=l&&(n=t+"/"),n=n+"HACSearch?geo="+o.geo.value+"&inDay="+o.inDay.value+"&inMonth="+o.inMonth.value+"&outDay="+o.outDay.value+"&outMonth="+o.outMonth.value+"&q="+o.hacGeo.value,doNewTAWindow(n,"TAHacSearchWin")}}function doHacSearchWithMCID(e,t,n){var o=t,l=document.getElementById(e);if(null!=l&&void 0!=l&&null!=t&&void 0!=t){var i=t.substring(t.length-1);"/"!=i&&(o=t+"/"),o=o+"HACSearch?geo="+l.geo.value+"&m="+n+"&inDay="+l.inDay.value+"&inMonth="+l.inMonth.value+"&outDay="+l.outDay.value+"&outMonth="+l.outMonth.value+"&q="+l.hacGeo.value,doNewTAWindow(o,"TAHacSearchWin")}}function doHacSearchWithMCIDNewStyle(e,t,n){var o=t,l=document.getElementById(e);if(null!=l&&void 0!=l&&null!=t&&void 0!=t){var i=t.substring(t.length-1);"/"!=i&&(o=t+"/");var a=l.inMonth.value;null!=a&&(a=a.replace("/","+"));var r=l.outMonth.value;null!=r&&(r=r.replace("/","+")),o=o+"HACSearch?geo="+l.geo.value+"&m="+n+"&inDay="+l.inDay.value+"&inMonth="+a+"&outDay="+l.outDay.value+"&outMonth="+r,doNewTAWindow(o,"TAHacSearchWin")}}function doDestSearch(e){var t=document.getElementById("DESTSEARCH_FORM");t.locationId.value=t.geo.value,hideElem("destSearchError");var n={url:"/WidgetEmbed",data:t,onFailure:function(e){showElem("destSearchError")},onSuccess:function(e){var t=document.getElementById("cdsDestContent");if(null!=t&&void 0!=t){t.innerHTML=e;var n=document.getElementById("DESTSEARCH_FORM");if(null!=n&&null!=n.tab){var o=document.getElementById("list"+n.tab.value);if(null!=o&&changeTab(n.tab.value),null!=o&&"Map"==n.tab.value||null==o&&"Map"==n.defaultTab.value){var l=document.getElementById("mapLatLongInfo");if(null!=l&&null!=l.childNodes){var i=l.childNodes[0].nodeValue;if(null!=i){var a=i.split(":");null!=a&&3==a.length&&ta.mapsv2.WidgetMap.showMap("theMap",parseFloat(a[0]),parseFloat(a[1]),parseInt(a[2]))}}}}}},evalScripts:!0};new Request(n).send(),clearPhotoInfo(t.uniq)}function doTOGSearch(e){var t=document.getElementById("CDSTOG_FORM"),n=checkTOGInput(t);if(1!=n){hideElem("cdsTogIntro"),showElem("cdsTogSpinner");var o={url:"/TankOfGas",data:t,onFailure:ta.util.error.ajaxFailure.partial("CdsWidgets:doTOGSearch"),onComplete:function(e){if(0==e.indexOf("ERROR"))showElem("tog_error_notfoundcity"),showElem("TOG_ERROR_MSG"),addElemClass("TANK_OF_GAS_FORM","cdsTogErr"),hideElem("cdsTogSpinner"),ta.id("TANK_RESULTS").empty();else{var t=document.getElementById("cdsTogResults");null!=t&&void 0!=t&&(t.innerHTML=e,t.style.display="block",hideElem("cdsTogIntro"),hideElem("cdsTogSpinner"))}sendHeight()}};new Request(o).send()}}function redoTOGSearch(e,t){var n=document.getElementById("CDSTOG_FORM");n.geo.value=e;for(var o=0;o<n.tog_range.length;o++)n.tog_range[o].value==t?n.tog_range[o].checked=!0:n.tog_range[o].checked=!1;doTOGSearch(n)}function checkTOGInput(e){hideElem("TOG_ERROR_MSG"),hideElem("tog_error_nocity"),hideElem("tog_error_notfoundcity"),hideElem("tog_error_range"),removeElemClass("TANK_OF_GAS_FORM","cdsTogErr"),removeElemClass("tog_city_label","cdsTogErr"),removeElemClass("tog_range_label","cdsTogErr"),removeElemClass("togGeoSearch","cdsTogErr");var t=!1;null!=e.q.value&&""!=e.q.value||(e.geo.value="",showElem("tog_error_nocity"),addElemClass("tog_city_label","cdsTogErr"),addElemClass("togGeoSearch","cdsTogErr"),t=!0);for(var n=!1,o=0;o<e.tog_range.length;o++)if(1==e.tog_range[o].checked){n=!0;break}return 0==n&&(showElem("tog_error_range"),addElemClass("tog_range_label","cdsTogErr"),t=!0),1==t&&(showElem("TOG_ERROR_MSG"),addElemClass("TANK_OF_GAS_FORM","cdsTogErr"),sendHeight(),!0)}function addElemClass(e,t){var n=document.getElementById(e);null!=n&&(n.className+=" "+t)}function removeElemClass(e,t){var n=document.getElementById(e);null!=n&&(n.className=n.className.replace(t,""))}function limitLength(e,t){null!=e&&null!=e.value&&e.value.length>=t&&(e.value=e.value.substr(0,t))}function initTextArea(e){null!=e&&(e.value="",e.onfocus=null,e.style.color="#2C2C2C")}function selectRating(e,t,n,o){if(null!=e&&null!=t&&0!=e.clientWidth){for(var l=e,i=0;l;)i+=l.offsetLeft,l=l.offsetParent;var a=t.pageX?t.pageX-window.pageXOffset:t.clientX,r=a-i,d=Math.ceil(r/e.clientWidth*5);document.body.className.match(/\brtl\b/)&&(d=6-d),e.className="widWRLRate ui_bubble_rating bubble_"+d+"0";var u=document.getElementById("ratingText"+o),s=document.getElementById("rating"+d+o);if(null!=u&&null!=s&&(u.innerHTML=s.value),n){var c=document.getElementById("qid10"+o);null!=c&&(c.value=d)}}}function lastSetRating(e,t){if(null!=e){var n=document.getElementById("qid10"+t);if(null!=n){var o=n.value,l=document.getElementById("rating"+o+t);if(null!=l){var i=l.value;0==o?e.className="widWRLRate ui_bubble_rating bubble_00":e.className="widWRLRate ui_bubble_rating bubble_"+o+"0";var a=document.getElementById("ratingText"+t);null!=a&&(a.innerHTML=i)}}}}function checkTextArea(e){var t=document.getElementById("taWRLTitle"+e),n=document.getElementById("defaultTitle"+e),o=document.getElementById("reviewTitle"+e);if(null!=t&&null!=n&&null!=o){n.value==t.value?o.value="":o.value=encodeURIComponent(t.value);var l=document.getElementById("cdsWRLForm"+e);null!=l&&l.submit()}}function checkSearchBox(e,t){null!=e&&e.value==t&&(e.value="",e.onclick=null,e.style.color="#2C2C2C")}function togglePIDetails(e){"show"==e?(showElem("cdsPIHideReviews"),hideElem("cdsPIReadReviews"),showElem("cdsPIDetails"),window.sendHeight&&sendHeight()):(showElem("cdsPIReadReviews"),hideElem("cdsPIHideReviews"),hideElem("cdsPIDetails"),window.sendHeight&&sendHeight())}function resizeRatingsOnlyWidget(e){if(e){var t=document.getElementById(e.widgetDivId),n=t.children[0],o=document.getElementById(e.locDivId),l=o.children[0],i=e.maxLocFontSize||14,a=e.minLocFontSize||10,r=e.maxHeight;if(a>i&&(a=i),e.wide){for(;l.offsetHeight>r&&i>a;)l.style.fontSize=--i+"px";o.style.maxWidth=l.offsetWidth+1+"px",n.style.width="auto",t.style.width=n.offsetWidth+1+"px"}else for(;l.offsetHeight>r&&i>a;)l.style.fontSize=--i+"px"}}function resizeWidgetText(e){var t=document.getElementById(e.textDivId),n=e.maxLocFontSize||14,o=e.minLocFontSize||10,l=e.maxHeight,i=e.maxWidth;if(t&&l&&i){for(o>n&&(o=n);(t.offsetHeight>l||t.offsetWidth>i)&&n>o;)t.style.fontSize=--n+"px";e.verticalCenter&&(centerDiv=document.getElementById(e.centerId),centerDiv.style.marginTop=(l-t.offsetHeight)/2+"px",centerDiv.style.marginTop=(l-t.offsetHeight)/2+"px")}}var photoInfo=new Array;
var ta=ta||{};ta.cds=ta.cds||{},ta.cds.handleTALink=function(t,e){if("undefined"!=typeof Cookie&&"undefined"!=typeof Cookie.writeSession&&"undefined"!=typeof cookieDomain&&Cookie&&Cookie.writeSession&&cookieDomain&&window.location.hostname.match(cookieDomain)&&Cookie.writeSession("MC",t))return!0;if("undefined"==typeof e)return!1;var o=null;if("string"==typeof e.pathname)o=e.pathname;else{if("string"!=typeof e.action)return!1;var n=document.createElement("a");n.href=e.action,o=n.pathname}var i=o.split(".");return i[0]=i[0]+"-m"+t,o=i.join("."),"string"==typeof e.pathname?e.pathname=o:"string"==typeof e.action&&(n.pathname=o,e.action=n.href),!0},ta.cds.widgetErrors={noReviews:"TA_noReviews",widgetError:"TA_widgetError"},ta.cds.msgPartner=function(t){window.parent.postMessage(t,"*")},ta.cds.sendWidgetInfo=function(t,e){var o=window.document,n=Math.max(o.body.scrollHeight,o.documentElement.scrollHeight,o.body.offsetHeight,o.documentElement.offsetHeight,o.body.clientHeight,o.documentElement.clientHeight),i=Math.max(o.body.scrollWidth,o.documentElement.scrollWidth,o.body.offsetWidth,o.documentElement.offsetWidth,o.body.clientWidth,o.documentElement.clientWidth),a={frameName:window.name,widgetData:{width:i,height:n}};if(e)for(var r in e)a.widgetData[r]=e[r];t&&(a.error=t),ta.cds.msgPartner(a),ta.cds.msgPartner(JSON.stringify(a))},ta.cds.informPartnerOfError=function(){ta.cds.msgPartner(ta.cds.widgetErrors.widgetError),ta.cds.sendWidgetInfo(ta.cds.widgetErrors.widgetError)},ta.cds.addOnload=function(t,e){e=e||window;var o=e.onload;"function"!=typeof e.onload?e.onload=t:e.onload=function(){o&&o(),t&&t()}};
